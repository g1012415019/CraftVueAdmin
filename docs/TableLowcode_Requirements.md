### 低代码表格组件 (TableLowcode) 需求文档

#### 1. 总体目标

`TableLowcode` 是一个高度可配置的、由 Schema 驱动的低代码组件。其核心目标是让开发者或最终用户能够通过图形化界面快速定义和生成一个完整的数据管理视图，包括数据展示、搜索、分页和操作功能，而无需编写大量前端代码。

它不仅仅是一个数据表格，而是一个用于创建数据驱动视图的微型应用生成器。

#### 2. 核心功能模块

该组件主要由以下三个可交互的模块构成：

*   **数据表格 (Data Table):** 负责根据配置动态渲染数据、列、分页和操作按钮。
*   **工具栏 (Toolbar):** 位于表格上方，提供“新增”、“刷新”等全局操作入口。
*   **配置面板 (Config Panel):** 一个可视化的配置界面，允许用户定义和修改整个数据视图的 Schema，是实现“低代码”的核心。

#### 3. 详细功能需求

**3.1 数据源 (Data Source)**
*   **API 驱动:** 组件的数据通过调用外部 API 获取。
*   **可配置端点:** 必须能在配置面板中指定数据源的 `apiUrl`。
*   **数据结构:** 组件依赖于一套预定义的 `ViewConfig` 类型来描述所有配置。

**3.2 数据表格 (DataTable.vue)**
*   **动态列渲染:** 表格的列是根据 `ColumnConfig` 动态生成的，而不是在代码中硬编码。
*   **自定义单元格组件:** 每一列可以指定不同的渲染组件（如：文本、数字、日期选择器、下拉选择框等）。
*   **分页支持:** 内置分页逻辑，并能与后端 API 联动。
*   **行选择:** 支持通过复选框进行单行或多行选择。
*   **操作列 (`ActionColumnConfig`):**
    *   支持在行末显示一个操作列。
    *   操作列中的按钮（如“编辑”、“删除”）可以被动态配置。
    *   点击按钮会触发相应的事件。

**3.3 工具栏 (Toolbar.vue)**
*   **新增记录:** 提供一个“新增”按钮，用于创建新数据。
*   **刷新数据:** 提供一个“刷新”按钮，用于重新从 API 获取数据。
*   **可扩展操作:** 支持根据配置添加自定义的全局操作按钮。

**3.4 表单项 (FormItem.vue)**
*   **动态表单:** 用于在搜索区域或弹窗表单中，根据列配置动态渲染表单控件。

#### 4. 低代码配置需求 (通过 `ConfigPanel.vue` 实现)

系统必须提供一个完整的图形化配置面板，允许用户实时修改和预览表格的行为和外观。

*   **4.1 数据源配置:**
    *   提供表单以输入和修改数据源的 API 地址。
*   **4.2 列配置 (`DisplayColumns.vue`):**
    *   提供界面来添加、删除、拖拽排序表格列。
    *   对于每一列，可以配置其对应的数据字段 (`field`)、显示的标题 (`label`)、宽度以及渲染组件类型。
*   **4.3 筛选与排序配置 (`FilterSettings.vue`, `SortSettings.vue`):**
    *   允许用户通过勾选和配置来决定哪些列是可筛选的、哪些是可排序的。
*   **4.4 记录与分组配置 (`RecordSettings.vue`, `GroupSettings.vue`):**
    *   提供界面配置记录的展示方式以及数据分组规则。
*   **4.5 通用设置:**
    *   提供表单配置表格的标题、是否显示索引列等。

---

总结来说，`TableLowcode` 的核心需求是围绕 **“配置”** 和 **“渲染”** 两大主题。它通过将数据视图的各个方面（数据源、列、操作）抽象为可配置的 Schema，然后提供一个 UI (`ConfigPanel`) 来编辑这个 Schema，最终由渲染引擎 (`DataTable`, `Toolbar`) 将其呈现出来。
